#!/usr/bin/env python3
"""Read values from config.toml"""
import sys
import tomllib
from pathlib import Path

if len(sys.argv) < 2:
    print("Usage: get-config <key>", file=sys.stderr)
    print("Example: get-config timezone", file=sys.stderr)
    sys.exit(1)

config_path = Path(__file__).parent.parent / 'config.toml'
with open(config_path, 'rb') as f:
    config = tomllib.load(f)

key = sys.argv[1]
if key in config:
    value = config[key]
    # Special handling for timezone - resolve it to a proper timezone
    if key == 'timezone':
        import subprocess
        result = subprocess.run(
            [Path(__file__).parent / 'resolve-timezone', value],
            capture_output=True,
            text=True
        )
        if result.returncode == 0:
            value = result.stdout.strip()
    print(value)
else:
    print(f"Key '{key}' not found", file=sys.stderr)
    sys.exit(1)