#!/bin/bash
# Main startup script for devcontainer
set -e

echo "=== DevContainer Startup ==="
echo "Project: $(basename "$(pwd)")"
echo "Time: $(date)"

# Check vault mount status
if [ -d "/workspaces/today/vault" ]; then
    if [ -n "$(ls -A /workspaces/today/vault 2>/dev/null)" ]; then
        echo "✅ Vault mounted from host ($(ls /workspaces/today/vault | wc -l) items)"
    else
        echo "⚠️  Vault directory exists but appears empty"
        echo "   Configure mounts in .devcontainer/mounts.local and rebuild"
    fi
else
    echo "ℹ️  No vault mounted"
    echo "   Configure mounts in .devcontainer/mounts.local and rebuild"
fi

echo ""
echo "DevContainer startup complete!"
echo "Run 'bin/today' to start an interactive session."
