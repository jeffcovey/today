# Logrotate configuration for Today application logs
# Install on droplet: sudo cp config/logrotate-today /etc/logrotate.d/today

/opt/today/.data/*.log {
    size 10M
    rotate 5
    maxage 14
    compress
    delaycompress
    notifempty
    missingok
    create 0644 root root
    postrotate
        # Restart services to release file handles
        systemctl reload vault-watcher 2>/dev/null || true
        systemctl reload vault-api 2>/dev/null || true
        systemctl reload inbox-api 2>/dev/null || true
    endscript
}